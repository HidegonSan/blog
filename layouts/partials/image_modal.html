<!-- Magnific Image Pop-Up Modal for Hugo | Thanks: https://gist.github.com/zjeaton/0cdd7e4bed9d292ab6f3d76b0369f16d -->


<!-- Place in layouts > partials > image-modal.html -->
<!-- Use the partial at the bottom of any page in which you want magnific pop-up images,
  or simply place at the bottom of baseof.html -->
<!-- Modal will open upon clicking the image. Modal will close with clicking the x or image. -->

<!-- The Modal -->
<div id="image_modal" class="image_modal" onclick="close_image_modal()">
    <button class="image_modal_close" onclick="close_image_modal()">close</button>
    <div class="image_modal_content" onclick="close_image_modal()">
        <img class="image_modal_picture" id="image_modal_picture" onclick="open_image_raw(this)">
    </div>
</div>

<script type="text/javascript">

    function open_image_raw(target) {
        close_image_modal();
        // window.open(target.src, "_blank")
    }

    // Open the Modal
    function open_image_modal(target_id) {
        var src = document.getElementById(target_id).src;
        if (src.includes("#")) {
            src = src.substring(0, src.indexOf("#"));
        };
        document.getElementById("image_modal_picture").src = src;
        document.getElementById("image_modal").style.display = "block";
        // Ensures the site footer is not shown if front of the modal. Remove if this is not an issue or
        // there is no footer. "site-footer" id can also be changed appropriately.
        // document.getElementById("site-footer").style.display = "hidden";

        // 目次とページトップ非表示
        if (document.getElementsByClassName("toc").length) { document.getElementsByClassName("toc")[0].style.display = "none"; }
        if (document.getElementById("top-link").length)    { document.getElementById("top-link").style.display = "none"; }
    }


    // Close the Modal
    function close_image_modal() { 
        // prevents flashing last modal image while new id is loading on open
        document.getElementById("image_modal_picture").src = "";
        document.getElementById("image_modal").style.display = "none";
        // See note above regarding the footer 
        // document.getElementById("site-footer").style.display = "block";

        // 目次とページトップ表示
        if (document.getElementsByClassName("toc").length) { document.getElementsByClassName("toc")[0].style.display = "block"; }
        if (document.getElementById("top-link").length)    { document.getElementById("top-link").style.display = "block"; }
    }

</script>
